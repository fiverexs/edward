(function(){function e(r){if(n.replaceState){var e=n.state;e===null?e=f(r,!1):e.type===u&&(e.url=r);n.replaceState(e,"",r)}else t.location.replace(i+r)}function o(r){if(n.pushState){var u=f(r,!0),e=r+"&ajaxhist=0&ajaxserp=0";n.pushState(u,"",e)}else t.location.replace(i+r)}function s(n){var t=typeof MMMessenger!="undefined"?MMMessenger.GetMessageData(n):null;t&&typeof t.data=="string"&&(t.command==="mm.replaceLocation"?e(t.data):t.command==="mm.pushLocation"&&o(t.data))}function f(n,t){var f,e=sessionStorage.getItem(r),i;return e&&(f=parseInt(e)),i=f,t&&(i++,sessionStorage.setItem(r,i.toString())),{type:u,url:n,hiddenParams:"&mode=overlay",count:i}}var t=window,i="#!",n=t.history,r="mm.idpstate",u="OverlayShow";SmartEvent.bind(t,"message",s,!0)})()