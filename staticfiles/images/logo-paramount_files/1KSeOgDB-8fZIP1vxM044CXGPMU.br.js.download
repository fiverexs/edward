var ClickBackRS;(function(n){function at(){bt()&&(vt(),sj_evt.bind("load_clickback_rs",v,!0),g(),sj_evt.bind("ajax.unload",tt))}function vt(){var n=_ge("b_results"),t;n!=null&&(t=ni(l),typeof _w!="undefined"&&t&&(sj_be(_d,l.visibilityChangedEventName,d),sj_evt.bind("ajax.unload",it)),u=n.querySelectorAll(st),wt(),sessionStorage[s]&&sessionStorage.removeItem(s),sessionStorage[h]&&sessionStorage.removeItem(h))}function v(){var n,r;if(e=ut(s),i=ut(h),u&&e&&i){for(t=null,n=0;n<u.length;n++)if(r=u[n],r&&e==r.getAttribute("href")&&i==n.toString()){t=rt(r);break}t&&pt()}}function yt(){var n=document.querySelectorAll("#inline_rs .rslist .b_suggestionText"),i,t,r;if(!n||n.length===0)return"";for(i=[],t=0;t<n.length;t++)r=n[t].textContent,r&&i.push(r);return i.join(",")}function pt(){if(!a){if(i!==null&&r[i]){w(i);return}if(t===null||t===void 0?void 0:t.classList.contains("b_algo")){var n=lt.replace(/\&amp\;/g,"&")+"&IG="+_G.IG+"&url="+ti(t)+"&q="+dt()+"&iid="+t.getAttribute("iid")+"&boprs="+yt();o("RSClickBackRequest",e||"");a=!0;sj_ajax(n,{callback:function(n,t){var f,u;a=!1;n&&t?(u=sj_ce("div"),t.appendTo(u),((f=u.querySelectorAll(p))===null||f===void 0?void 0:f.length)==1?(o("RSClickBackResponse","true"),kt()?c():(r[i]=u,b(u))):(c(),o("RSClickBackResponse","false"))):(c(),o("RSClickBackResponse","false"));nt();g()}})}else c()}}function w(n){r[n].style.display="block";f&&f!=n&&(r[f].style.display="none");f=n;var t=r[n].querySelector(p);t&&Lib.CssClass.remove(t,"b_hide")}function b(n){if(o("Show","Triggered"),t){var u=t.offsetHeight-ct;Lib.CssClass.add(t,"qbrs");t.setAttribute("data-oAH",u+"px");t.contains(r[i])||t.appendChild(n);w(i)}}function c(){var o=document.getElementById("inline_rs"),n=o?o.cloneNode(!0):null,f,s;(n&&n.classList.add("b_inline_ajax_rs"),f=_ge(ht),n&&f)&&(u&&t&&(r[i]=n,b(n),s=n.offsetHeight,f.style.height=s+"px"),e=null,i=null)}function wt(){var t,n;if(u)for(t=function(n){var i=u[n],r,t;sj_be(i,"click",function(){ft(i.getAttribute("href"),n.toString())});r=rt(i);t=r?r.querySelector(ot):null;t&&t!=y&&sj_be(t,"click",function(){ft(i.getAttribute("href"),n.toString())});y=t},n=0;n<u.length-1;n++)t(n)}function k(){f&&r[f]&&(r[f].style.display="none")}function d(){v()}function g(){for(var t=document.querySelectorAll(".b_clickback_close, #rscar_close"),n=0;n<t.length;n++)sj_be(t[n],"click",k)}function nt(){for(var t=document.querySelectorAll(".b_clickback_close, #rscar_close"),n=0;n<t.length;n++)sj_ue(t[n],"click",k)}function tt(){sj_evt.unbind("load_clickback_rs",v);nt();sj_evt.unbind("ajax.unload",tt)}function it(){sj_ue(_d,l.visibilityChangedEventName,d);sj_evt.unbind("ajax.unload",it)}function bt(){var n="sschkad",t="sschvad",i;try{if(typeof Storage=="undefined"||typeof sessionStorage=="undefined"||(sessionStorage.setItem(n,t),i=sessionStorage.getItem(n),sessionStorage.removeItem(n),i!=t))return!1}catch(r){return!1}return!0}function rt(n){while(n&&n.id!="b_results"){if(n.classList&&(n.classList.contains("b_algo")||n.classList.contains("sb_adTA")))return n;n=n.parentElement}return null}function ut(n){return sessionStorage[n]?sessionStorage.getItem(n):null}function ft(n,t){sessionStorage.setItem(s,n);sessionStorage.setItem(h,t)}function kt(){return typeof _G!="undefined"&&_G.EF!==undefined&&_G.EF.clickbackRScflog!==undefined&&_G.EF.clickbackRScflog===1}function o(n,t){_w.sj_log&&sj_log("CI.RSSQB",n,t)}function dt(){return et(window.location.search,"q")}function gt(){var i=undefined,r=undefined,t,n;if("hidden"in _d)i="hidden",r="visibilitychange";else for(t=["webkit","moz","ms","o"],n=0;n<t.length;n++)if(t[n]+"Hidden"in _d){i=t[n]+"Hidden";r=t[n]+"visibilitychange";break}return{hiddenProperty:i,visibilityChangedEventName:r}}function ni(n){return!!(n&&n.hiddenProperty&&n.visibilityChangedEventName)}function ti(n){var t,i;return n?(t=n.querySelector("h2 a"),!t)?null:(i=t.getAttribute("href"),!i)?null:ii(i):null}function ii(n){var t=et(n,"u");if(!t||!t.startsWith("a1"))return n;try{return t=t.substring(2).replace(/_/g,"/").replace(/-/g,"+"),t=decodeURIComponent(atob(t))}catch(i){return Log.Log("EnLink",n,t,!1),n}}function et(n,t){var r=new RegExp("[?&]{1}"+t+"=([^&]+)([\\/\\\\][^?#]*)?([?#].*)?","i"),i=n.match(r);return i?i[1]:""}var ot=".b_attribution cite, .b_tpcn, .b_adTopIcon_container",st="#b_results > .b_algo > h2 > a,#b_results > .b_algo .sp-rn-title  > h2 > a,#b_results > .b_algo .b_imagePair  > h2 > a,#b_results > .b_algo > .b_title > h2 > a,#b_results .sb_adTA > h2 > a,#b_results .sb_adTA >.b_title > h2 > a",ht="inline_rs",ct=14,l=gt(),s="cbAdUrl",h="cbAdUrlIndex",u,y=null,e=null,i=null,t=null,a=!1,lt="/recoRS?",p=".b_inline_ajax_rs",r=[],f;n.bindEvent=at})(ClickBackRS||(ClickBackRS={}))